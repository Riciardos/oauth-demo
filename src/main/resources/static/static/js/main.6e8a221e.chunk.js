(this["webpackJsonpoauth-demo"]=this["webpackJsonpoauth-demo"]||[]).push([[0],{63:function(e,t,n){},64:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(10),s=n.n(i),c=(n(63),n(64),n(44)),o=n(33),l=n.n(o),u=n(43),j=n(111),d=n(116),h=n(114),g=n(121),b=n(124),m=n(34),x=n(117),f=n(118),p=n(119),O=n(120),v=n(125),w=n(122),y=n(49),N=n.n(y),I=n(47),S=n.n(I),A=n(5),B=Object(j.a)({table:{minWidth:650},chatSection:{width:"100%",height:"80vh"},headBG:{backgroundColor:"#e0e0e0"},borderRight500:{borderRight:"1px solid #e0e0e0"},messageArea:{height:"70vh",overflowY:"auto"}}),k=function(e){if(null!=window.googleUser)return window.googleUser.getBasicProfile().getId()===e.principal.userId?"left":"right"},P=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Message:",JSON.stringify(t)),null!=window.googleUser&&null!=t){e.next=3;break}return e.abrupt("return");case 3:return n=window.googleUser.getAuthResponse().id_token,e.next=6,fetch("http://localhost:8080/api/post-message",{method:"post",headers:new Headers({Authorization:"Bearer "+n}),body:t}).then((function(e){console.log("Posted message:"+t)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=window.googleUser){e.next=2;break}return e.abrupt("return");case 2:return a=window.googleUser.getAuthResponse().id_token,e.next=5,fetch("http://localhost:8080/api/get-messages",{method:"get",headers:new Headers({Authorization:"Bearer "+a})}).then((function(e){return e.json()})).then((function(e){console.log("DATA "+JSON.stringify(e)),e&&n({messages:e})}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){return"Name"},D=function(){return"N/A"},R=function(){return{getName:C,getImageUrl:D}},T=function(){var e=B(),t=Object(a.useState)({messages:[]}),n=Object(c.a)(t,2),r=n[0],i=n[1],s=Object(a.useState)(""),o=Object(c.a)(s,2),l=o[0],u=o[1];Object(a.useEffect)((function(){var e=setInterval((function(){return U(r,i)}),5e3);return function(){return clearInterval(e)}}));var j=window.googleUser||{getBasicProfile:R};return Object(A.jsxs)("div",{children:[Object(A.jsx)("h2",{children:"Welcome to the Matchesfashion OAuth Demo"}),";",Object(A.jsx)(h.a,{container:!0,children:Object(A.jsx)(h.a,{item:!0,xs:12,children:Object(A.jsx)(m.a,{variant:"h5",className:"header-message",children:"Chat"})})}),Object(A.jsxs)(h.a,{container:!0,component:d.a,className:e.chatSection,children:[Object(A.jsxs)(h.a,{item:!0,xs:3,className:e.borderRight500,children:[Object(A.jsx)(x.a,{children:Object(A.jsxs)(f.a,{button:!0,children:[Object(A.jsx)(p.a,{children:Object(A.jsx)(v.a,{alt:j.getBasicProfile().getName(),src:j.getBasicProfile().getImageUrl()})}),Object(A.jsx)(O.a,{primary:j.getBasicProfile().getName()})]},j.getBasicProfile().getName())}),Object(A.jsx)(g.a,{}),Object(A.jsx)(h.a,{item:!0,xs:12,style:{padding:"10px"},children:Object(A.jsx)(b.a,{id:"outlined-basic-email",label:"Search",variant:"outlined",fullWidth:!0})}),Object(A.jsx)(g.a,{}),Object(A.jsx)(x.a,{children:r.messages&&r.messages.filter((function(e,t,n){return n.findIndex((function(t){return t.principal.userId===e.principal.userId}))===t})).map((function(e){return Object(A.jsxs)(f.a,{button:!0,children:[Object(A.jsx)(p.a,{children:Object(A.jsx)(v.a,{alt:e.principal.name})}),Object(A.jsx)(O.a,{primary:e.principal.name})]},e.principal.name)}))})]}),Object(A.jsxs)(h.a,{item:!0,xs:9,children:[Object(A.jsx)(x.a,{className:e.messageArea,children:r.messages.map((function(e,t){return Object(A.jsx)(f.a,{children:Object(A.jsxs)(h.a,{container:!0,children:[Object(A.jsx)(h.a,{item:!0,xs:8,children:Object(A.jsx)(O.a,{align:k(e),secondary:e.principal.name})}),Object(A.jsx)(h.a,{item:!0,xs:12,children:Object(A.jsx)(O.a,{align:k(e),primary:e.message})}),Object(A.jsx)(h.a,{item:!0,xs:12,children:Object(A.jsx)(O.a,{align:k(e),secondary:S()(e.localDateTime).format("hh:mm")})})]})},t)}))}),Object(A.jsx)(g.a,{}),Object(A.jsx)("form",{id:"input-form",onSubmit:function(e){e.preventDefault(),P(l).then((function(){return U(r,i)}))},children:Object(A.jsxs)(h.a,{container:!0,style:{padding:"20px"},children:[Object(A.jsx)(h.a,{item:!0,xs:11,children:Object(A.jsx)(b.a,{id:"outlined-basic-email",label:"Type Something",fullWidth:!0,onInputCapture:function(e){return u(e.target.value)}})}),Object(A.jsx)(h.a,{xs:1,align:"right",children:Object(A.jsx)(w.a,{color:"primary","aria-label":"add",children:Object(A.jsx)(N.a,{})})})]})})]})]})]})};n(123);var F=function(){return Object(A.jsxs)("div",{className:"App",children:[Object(A.jsx)("div",{className:"g-signin2","data-onsuccess":"onSignIn"}),Object(A.jsx)(T,{})]})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,127)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))};s.a.render(Object(A.jsx)(r.a.StrictMode,{children:Object(A.jsx)(F,{})}),document.getElementById("root")),J()}},[[75,1,2]]]);
//# sourceMappingURL=main.6e8a221e.chunk.js.map